{"is_source_file": true, "format": "Python", "description": "This is the main source code file for a backend REST API of a social media application, implemented using FastAPI. It defines schema models, database schema initialization, and route handlers for users, profiles, posts, analytics, and admin operations, along with configuration for CORS and environment variables.", "external_files": ["dotenv (optional, for loading environment variables)"], "external_methods": ["load_dotenv()"], "published": ["create_app", "app"], "classes": [{"name": "PageMeta", "description": "Schema for pagination metadata used in paginated responses."}, {"name": "PaginatedResponse", "description": "Generic paginated response schema containing meta and items."}, {"name": "UserCreate", "description": "Schema for creating a new user."}, {"name": "UserUpdate", "description": "Schema for updating existing user fields."}, {"name": "UserOut", "description": "Schema for representing user data returned to clients."}, {"name": "ProfileCreate", "description": "Schema for creating a new profile."}, {"name": "ProfileUpdate", "description": "Schema for updating profile fields."}, {"name": "ProfileOut", "description": "Schema for profile data exposed externally."}, {"name": "PostCreate", "description": "Schema for creating a new post."}, {"name": "PostUpdate", "description": "Schema for updating a post."}, {"name": "PostOut", "description": "Schema for post data returned to clients."}, {"name": "AnalyticsSummary", "description": "Summary data model for analytics endpoint results."}], "methods": [{"name": "get_db_conn()", "description": "Creates and returns a SQLite database connection with foreign keys enabled.", "scope": "", "scopeKind": ""}, {"name": "FastAPI create_app()", "description": "Constructs and configures a FastAPI app with CORS, route handlers, and database schema setup.", "scope": "", "scopeKind": ""}, {"name": "health_check()", "description": "Health check endpoint returning service status and database info.", "scope": "create_app", "scopeKind": "function"}, {"name": "list_users( page: int = Query(1, ge=1, description=\"Page number\"), page_size: int = Query(10, ge=1, le=100, description=\"Items per page\"), q: Optional[str] = Query(None, description=\"Search query for email or name\"), session_id: Optional[str] = Cookie(default=None), )", "description": "Handles listing users with pagination and search.", "scope": "create_app", "scopeKind": "function"}, {"name": "create_user(payload: UserCreate, session_id: Optional[str] = Cookie(default=None))", "description": "Creates a new user record.", "scope": "create_app", "scopeKind": "function"}, {"name": "get_user_by_id(user_id: int = Path(...), session_id: Optional[str] = Cookie(default=None))", "description": "Retrieves a user by ID.", "scope": "create_app", "scopeKind": "function"}, {"name": "update_user(user_id: int = Path(...), payload: UserUpdate = None, session_id: Optional[str] = Cookie(default=None))", "description": "Updates user details.", "scope": "create_app", "scopeKind": "function"}, {"name": "delete_user(user_id: int = Path(...), session_id: Optional[str] = Cookie(default=None))", "description": "Deletes a user record.", "scope": "create_app", "scopeKind": "function"}, {"name": "list_profiles( page: int = Query(1, ge=1), page_size: int = Query(10, ge=1, le=100), user_id: Optional[int] = Query(None, description=\"Filter by user id\"), session_id: Optional[str] = Cookie(default=None), )", "description": "Lists profiles with optional filtering.", "scope": "create_app", "scopeKind": "function"}, {"name": "create_profile(payload: ProfileCreate, session_id: Optional[str] = Cookie(default=None))", "description": "Creates a new profile, ensuring associated user exists.", "scope": "create_app", "scopeKind": "function"}, {"name": "get_profile(profile_id: int = Path(...), session_id: Optional[str] = Cookie(default=None))", "description": "Retrieves a profile by ID.", "scope": "create_app", "scopeKind": "function"}, {"name": "update_profile(profile_id: int = Path(...), payload: ProfileUpdate = None, session_id: Optional[str] = Cookie(default=None))", "description": "Updates profile data.", "scope": "create_app", "scopeKind": "function"}, {"name": "delete_profile(profile_id: int = Path(...), session_id: Optional[str] = Cookie(default=None))", "description": "Deletes a profile.", "scope": "create_app", "scopeKind": "function"}, {"name": "list_posts( page: int = Query(1, ge=1), page_size: int = Query(10, ge=1, le=100), user_id: Optional[int] = Query(None, description=\"Filter by author user id\"), session_id: Optional[str] = Cookie(default=None), )", "description": "Lists posts with optional filtering.", "scope": "create_app", "scopeKind": "function"}, {"name": "create_post(payload: PostCreate, session_id: Optional[str] = Cookie(default=None))", "description": "Creates a new post.", "scope": "create_app", "scopeKind": "function"}, {"name": "analytics_summary(session_id: Optional[str] = Cookie(default=None))", "description": "Provides summarized analytics data on users, posts, engagement, and top users.", "scope": "create_app", "scopeKind": "function"}, {"name": "admin_summary(session_id: Optional[str] = Cookie(default=None))", "description": "Provides aggregate stats for admin purposes.", "scope": "create_app", "scopeKind": "function"}, {"name": "grant_admin(user_id: int = Path(...), session_id: Optional[str] = Cookie(default=None))", "description": "Grants admin privileges to a user.", "scope": "create_app", "scopeKind": "function"}, {"name": "revoke_admin(user_id: int = Path(...), session_id: Optional[str] = Cookie(default=None))", "description": "Revokes admin privileges from a user.", "scope": "create_app", "scopeKind": "function"}, {"name": "websocket_usage_note()", "description": "Provides information about WebSocket endpoints (none currently).", "scope": "create_app", "scopeKind": "function"}, {"name": "ensure_schema()", "scope": "create_app", "scopeKind": "function", "description": "unavailable"}], "calls": ["get_db_conn()", "load_dotenv()", "conn.execute()"], "search-terms": ["FastAPI", "social_media_backend", "user management", "profiles", "posts", "analytics", "admin operations", "SQLite", "schemas", "CORS", "routes"], "state": 2, "file_id": 3, "knowledge_revision": 15, "git_revision": "3171377a5e79708c170c6b032b769d2a7cee5ea9", "revision_history": [{"8": "836c8cb052bbc5a47b54c25e2c3d0dbb3587f42a"}, {"10": "836c8cb052bbc5a47b54c25e2c3d0dbb3587f42a"}, {"14": "836c8cb052bbc5a47b54c25e2c3d0dbb3587f42a"}, {"15": "3171377a5e79708c170c6b032b769d2a7cee5ea9"}], "ctags": [{"_type": "tag", "name": "AnalyticsSummary", "path": "/tmp/kavia/workspace/code-generation/user-approval-system-747-756/social_media_backend/src/api/main.py", "pattern": "/^    class AnalyticsSummary(BaseModel):$/", "file": true, "language": "Python", "kind": "class", "scope": "create_app", "scopeKind": "function"}, {"_type": "tag", "name": "CORS_ALLOW_ORIGINS", "path": "/tmp/kavia/workspace/code-generation/user-approval-system-747-756/social_media_backend/src/api/main.py", "pattern": "/^CORS_ALLOW_ORIGINS = os.getenv(\"CORS_ALLOW_ORIGINS\", \"http:\\/\\/localhost:3000\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "PageMeta", "path": "/tmp/kavia/workspace/code-generation/user-approval-system-747-756/social_media_backend/src/api/main.py", "pattern": "/^    class PageMeta(BaseModel):$/", "file": true, "language": "Python", "kind": "class", "scope": "create_app", "scopeKind": "function"}, {"_type": "tag", "name": "PaginatedResponse", "path": "/tmp/kavia/workspace/code-generation/user-approval-system-747-756/social_media_backend/src/api/main.py", "pattern": "/^    class PaginatedResponse(BaseModel):$/", "file": true, "language": "Python", "kind": "class", "scope": "create_app", "scopeKind": "function"}, {"_type": "tag", "name": "PostCreate", "path": "/tmp/kavia/workspace/code-generation/user-approval-system-747-756/social_media_backend/src/api/main.py", "pattern": "/^    class PostCreate(BaseModel):$/", "file": true, "language": "Python", "kind": "class", "scope": "create_app", "scopeKind": "function"}, {"_type": "tag", "name": "PostOut", "path": "/tmp/kavia/workspace/code-generation/user-approval-system-747-756/social_media_backend/src/api/main.py", "pattern": "/^    class PostOut(BaseModel):$/", "file": true, "language": "Python", "kind": "class", "scope": "create_app", "scopeKind": "function"}, {"_type": "tag", "name": "PostUpdate", "path": "/tmp/kavia/workspace/code-generation/user-approval-system-747-756/social_media_backend/src/api/main.py", "pattern": "/^    class PostUpdate(BaseModel):$/", "file": true, "language": "Python", "kind": "class", "scope": "create_app", "scopeKind": "function"}, {"_type": "tag", "name": "ProfileCreate", "path": "/tmp/kavia/workspace/code-generation/user-approval-system-747-756/social_media_backend/src/api/main.py", "pattern": "/^    class ProfileCreate(BaseModel):$/", "file": true, "language": "Python", "kind": "class", "scope": "create_app", "scopeKind": "function"}, {"_type": "tag", "name": "ProfileOut", "path": "/tmp/kavia/workspace/code-generation/user-approval-system-747-756/social_media_backend/src/api/main.py", "pattern": "/^    class ProfileOut(BaseModel):$/", "file": true, "language": "Python", "kind": "class", "scope": "create_app", "scopeKind": "function"}, {"_type": "tag", "name": "ProfileUpdate", "path": "/tmp/kavia/workspace/code-generation/user-approval-system-747-756/social_media_backend/src/api/main.py", "pattern": "/^    class ProfileUpdate(BaseModel):$/", "file": true, "language": "Python", "kind": "class", "scope": "create_app", "scopeKind": "function"}, {"_type": "tag", "name": "SESSION_TTL_MINUTES", "path": "/tmp/kavia/workspace/code-generation/user-approval-system-747-756/social_media_backend/src/api/main.py", "pattern": "/^SESSION_TTL_MINUTES = int(os.getenv(\"SESSION_TTL_MINUTES\", \"60\"))$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "SQLITE_DB", "path": "/tmp/kavia/workspace/code-generation/user-approval-system-747-756/social_media_backend/src/api/main.py", "pattern": "/^SQLITE_DB = os.getenv(\"SQLITE_DB\", os.path.join(os.path.dirname(__file__), \"..\", \"..\", \"social_m/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "UserCreate", "path": "/tmp/kavia/workspace/code-generation/user-approval-system-747-756/social_media_backend/src/api/main.py", "pattern": "/^    class UserCreate(BaseModel):$/", "file": true, "language": "Python", "kind": "class", "scope": "create_app", "scopeKind": "function"}, {"_type": "tag", "name": "UserOut", "path": "/tmp/kavia/workspace/code-generation/user-approval-system-747-756/social_media_backend/src/api/main.py", "pattern": "/^    class UserOut(BaseModel):$/", "file": true, "language": "Python", "kind": "class", "scope": "create_app", "scopeKind": "function"}, {"_type": "tag", "name": "UserUpdate", "path": "/tmp/kavia/workspace/code-generation/user-approval-system-747-756/social_media_backend/src/api/main.py", "pattern": "/^    class UserUpdate(BaseModel):$/", "file": true, "language": "Python", "kind": "class", "scope": "create_app", "scopeKind": "function"}, {"_type": "tag", "name": "admin_summary", "path": "/tmp/kavia/workspace/code-generation/user-approval-system-747-756/social_media_backend/src/api/main.py", "pattern": "/^    def admin_summary(session_id: Optional[str] = Cookie(default=None)):$/", "file": true, "language": "Python", "kind": "function", "signature": "(session_id: Optional[str] = Cookie(default=None))", "scope": "create_app", "scopeKind": "function"}, {"_type": "tag", "name": "analytics_summary", "path": "/tmp/kavia/workspace/code-generation/user-approval-system-747-756/social_media_backend/src/api/main.py", "pattern": "/^    def analytics_summary(session_id: Optional[str] = Cookie(default=None)):$/", "file": true, "language": "Python", "kind": "function", "signature": "(session_id: Optional[str] = Cookie(default=None))", "scope": "create_app", "scopeKind": "function"}, {"_type": "tag", "name": "app", "path": "/tmp/kavia/workspace/code-generation/user-approval-system-747-756/social_media_backend/src/api/main.py", "pattern": "/^app = create_app()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "avatar_url", "path": "/tmp/kavia/workspace/code-generation/user-approval-system-747-756/social_media_backend/src/api/main.py", "pattern": "/^        avatar_url: Optional[str] = Field(None, description=\"Avatar URL\", max_length=255)$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "create_app.ProfileCreate", "scopeKind": "class"}, {"_type": "tag", "name": "avatar_url", "path": "/tmp/kavia/workspace/code-generation/user-approval-system-747-756/social_media_backend/src/api/main.py", "pattern": "/^        avatar_url: Optional[str] = Field(None, description=\"Avatar URL\", max_length=255)$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "create_app.ProfileUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "avatar_url", "path": "/tmp/kavia/workspace/code-generation/user-approval-system-747-756/social_media_backend/src/api/main.py", "pattern": "/^        avatar_url: Optional[str] = None$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "create_app.ProfileOut", "scopeKind": "class"}, {"_type": "tag", "name": "bio", "path": "/tmp/kavia/workspace/code-generation/user-approval-system-747-756/social_media_backend/src/api/main.py", "pattern": "/^        bio: Optional[str] = Field(None, description=\"Short biography\", max_length=280)$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "create_app.ProfileCreate", "scopeKind": "class"}, {"_type": "tag", "name": "bio", "path": "/tmp/kavia/workspace/code-generation/user-approval-system-747-756/social_media_backend/src/api/main.py", "pattern": "/^        bio: Optional[str] = Field(None, description=\"Short biography\", max_length=280)$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "create_app.ProfileUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "bio", "path": "/tmp/kavia/workspace/code-generation/user-approval-system-747-756/social_media_backend/src/api/main.py", "pattern": "/^        bio: Optional[str] = None$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "create_app.ProfileOut", "scopeKind": "class"}, {"_type": "tag", "name": "comments", "path": "/tmp/kavia/workspace/code-generation/user-approval-system-747-756/social_media_backend/src/api/main.py", "pattern": "/^        comments: int = 0$/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "create_app.PostOut", "scopeKind": "class"}, {"_type": "tag", "name": "content", "path": "/tmp/kavia/workspace/code-generation/user-approval-system-747-756/social_media_backend/src/api/main.py", "pattern": "/^        content: Optional[str] = Field(None, description=\"Updated content\", min_length=1, max_le/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "create_app.PostUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "content", "path": "/tmp/kavia/workspace/code-generation/user-approval-system-747-756/social_media_backend/src/api/main.py", "pattern": "/^        content: str = Field(..., description=\"Post text content\", min_length=1, max_length=500)$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "create_app.PostCreate", "scopeKind": "class"}, {"_type": "tag", "name": "create_app", "path": "/tmp/kavia/workspace/code-generation/user-approval-system-747-756/social_media_backend/src/api/main.py", "pattern": "/^def create_app() -> FastAPI:$/", "language": "Python", "typeref": "typename:FastAPI", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "create_post", "path": "/tmp/kavia/workspace/code-generation/user-approval-system-747-756/social_media_backend/src/api/main.py", "pattern": "/^    def create_post(payload: PostCreate, session_id: Optional[str] = Cookie(default=None)):$/", "file": true, "language": "Python", "kind": "function", "signature": "(payload: PostCreate, session_id: Optional[str] = Cookie(default=None))", "scope": "create_app", "scopeKind": "function"}, {"_type": "tag", "name": "create_profile", "path": "/tmp/kavia/workspace/code-generation/user-approval-system-747-756/social_media_backend/src/api/main.py", "pattern": "/^    def create_profile(payload: ProfileCreate, session_id: Optional[str] = Cookie(default=None))/", "file": true, "language": "Python", "kind": "function", "signature": "(payload: ProfileCreate, session_id: Optional[str] = Cookie(default=None))", "scope": "create_app", "scopeKind": "function"}, {"_type": "tag", "name": "create_user", "path": "/tmp/kavia/workspace/code-generation/user-approval-system-747-756/social_media_backend/src/api/main.py", "pattern": "/^    def create_user(payload: UserCreate, session_id: Optional[str] = Cookie(default=None)):$/", "file": true, "language": "Python", "kind": "function", "signature": "(payload: UserCreate, session_id: Optional[str] = Cookie(default=None))", "scope": "create_app", "scopeKind": "function"}, {"_type": "tag", "name": "created_at", "path": "/tmp/kavia/workspace/code-generation/user-approval-system-747-756/social_media_backend/src/api/main.py", "pattern": "/^        created_at: Optional[str] = None$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "create_app.PostOut", "scopeKind": "class"}, {"_type": "tag", "name": "created_at", "path": "/tmp/kavia/workspace/code-generation/user-approval-system-747-756/social_media_backend/src/api/main.py", "pattern": "/^        created_at: Optional[str] = None$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "create_app.UserOut", "scopeKind": "class"}, {"_type": "tag", "name": "delete_profile", "path": "/tmp/kavia/workspace/code-generation/user-approval-system-747-756/social_media_backend/src/api/main.py", "pattern": "/^    def delete_profile(profile_id: int = Path(...), session_id: Optional[str] = Cookie(default=N/", "file": true, "language": "Python", "kind": "function", "signature": "(profile_id: int = Path(...), session_id: Optional[str] = Cookie(default=None))", "scope": "create_app", "scopeKind": "function"}, {"_type": "tag", "name": "delete_user", "path": "/tmp/kavia/workspace/code-generation/user-approval-system-747-756/social_media_backend/src/api/main.py", "pattern": "/^    def delete_user(user_id: int = Path(...), session_id: Optional[str] = Cookie(default=None)):$/", "file": true, "language": "Python", "kind": "function", "signature": "(user_id: int = Path(...), session_id: Optional[str] = Cookie(default=None))", "scope": "create_app", "scopeKind": "function"}, {"_type": "tag", "name": "email", "path": "/tmp/kavia/workspace/code-generation/user-approval-system-747-756/social_media_backend/src/api/main.py", "pattern": "/^        email: Optional[str] = Field(None, description=\"Updated email\")$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "create_app.UserUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "email", "path": "/tmp/kavia/workspace/code-generation/user-approval-system-747-756/social_media_backend/src/api/main.py", "pattern": "/^        email: str = Field(..., description=\"Unique email address for the user\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "create_app.UserCreate", "scopeKind": "class"}, {"_type": "tag", "name": "ensure_schema", "path": "/tmp/kavia/workspace/code-generation/user-approval-system-747-756/social_media_backend/src/api/main.py", "pattern": "/^    def ensure_schema():$/", "file": true, "language": "Python", "kind": "function", "signature": "()", "scope": "create_app", "scopeKind": "function"}, {"_type": "tag", "name": "get_db_conn", "path": "/tmp/kavia/workspace/code-generation/user-approval-system-747-756/social_media_backend/src/api/main.py", "pattern": "/^def get_db_conn():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "get_profile", "path": "/tmp/kavia/workspace/code-generation/user-approval-system-747-756/social_media_backend/src/api/main.py", "pattern": "/^    def get_profile(profile_id: int = Path(...), session_id: Optional[str] = Cookie(default=None/", "file": true, "language": "Python", "kind": "function", "signature": "(profile_id: int = Path(...), session_id: Optional[str] = Cookie(default=None))", "scope": "create_app", "scopeKind": "function"}, {"_type": "tag", "name": "get_user_by_id", "path": "/tmp/kavia/workspace/code-generation/user-approval-system-747-756/social_media_backend/src/api/main.py", "pattern": "/^    def get_user_by_id(user_id: int = Path(...), session_id: Optional[str] = Cookie(default=None/", "file": true, "language": "Python", "kind": "function", "signature": "(user_id: int = Path(...), session_id: Optional[str] = Cookie(default=None))", "scope": "create_app", "scopeKind": "function"}, {"_type": "tag", "name": "grant_admin", "path": "/tmp/kavia/workspace/code-generation/user-approval-system-747-756/social_media_backend/src/api/main.py", "pattern": "/^    def grant_admin(user_id: int = Path(...), session_id: Optional[str] = Cookie(default=None)):$/", "file": true, "language": "Python", "kind": "function", "signature": "(user_id: int = Path(...), session_id: Optional[str] = Cookie(default=None))", "scope": "create_app", "scopeKind": "function"}, {"_type": "tag", "name": "health_check", "path": "/tmp/kavia/workspace/code-generation/user-approval-system-747-756/social_media_backend/src/api/main.py", "pattern": "/^    def health_check():$/", "file": true, "language": "Python", "kind": "function", "signature": "()", "scope": "create_app", "scopeKind": "function"}, {"_type": "tag", "name": "likes", "path": "/tmp/kavia/workspace/code-generation/user-approval-system-747-756/social_media_backend/src/api/main.py", "pattern": "/^        likes: int = 0$/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "create_app.PostOut", "scopeKind": "class"}, {"_type": "tag", "name": "list_posts", "path": "/tmp/kavia/workspace/code-generation/user-approval-system-747-756/social_media_backend/src/api/main.py", "pattern": "/^    def list_posts($/", "file": true, "language": "Python", "kind": "function", "signature": "( page: int = Query(1, ge=1), page_size: int = Query(10, ge=1, le=100), user_id: Optional[int] = Query(None, description=\"Filter by author user id\"), session_id: Optional[str] = Cookie(default=None), )", "scope": "create_app", "scopeKind": "function"}, {"_type": "tag", "name": "list_profiles", "path": "/tmp/kavia/workspace/code-generation/user-approval-system-747-756/social_media_backend/src/api/main.py", "pattern": "/^    def list_profiles($/", "file": true, "language": "Python", "kind": "function", "signature": "( page: int = Query(1, ge=1), page_size: int = Query(10, ge=1, le=100), user_id: Optional[int] = Query(None, description=\"Filter by user id\"), session_id: Optional[str] = Cookie(default=None), )", "scope": "create_app", "scopeKind": "function"}, {"_type": "tag", "name": "list_users", "path": "/tmp/kavia/workspace/code-generation/user-approval-system-747-756/social_media_backend/src/api/main.py", "pattern": "/^    def list_users($/", "file": true, "language": "Python", "kind": "function", "signature": "( page: int = Query(1, ge=1, description=\"Page number\"), page_size: int = Query(10, ge=1, le=100, description=\"Items per page\"), q: Optional[str] = Query(None, description=\"Search query for email or name\"), session_id: Optional[str] = Cookie(default=None), )", "scope": "create_app", "scopeKind": "function"}, {"_type": "tag", "name": "name", "path": "/tmp/kavia/workspace/code-generation/user-approval-system-747-756/social_media_backend/src/api/main.py", "pattern": "/^        name: Optional[str] = Field(None, description=\"Updated name\")$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "create_app.UserUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "name", "path": "/tmp/kavia/workspace/code-generation/user-approval-system-747-756/social_media_backend/src/api/main.py", "pattern": "/^        name: str = Field(..., description=\"Display name\", min_length=1, max_length=100)$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "create_app.UserCreate", "scopeKind": "class"}, {"_type": "tag", "name": "page", "path": "/tmp/kavia/workspace/code-generation/user-approval-system-747-756/social_media_backend/src/api/main.py", "pattern": "/^        page: int = Field(..., description=\"Current page number (1-indexed)\")$/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "create_app.PageMeta", "scopeKind": "class"}, {"_type": "tag", "name": "page_size", "path": "/tmp/kavia/workspace/code-generation/user-approval-system-747-756/social_media_backend/src/api/main.py", "pattern": "/^        page_size: int = Field(..., description=\"Number of items per page\")$/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "create_app.PageMeta", "scopeKind": "class"}, {"_type": "tag", "name": "password", "path": "/tmp/kavia/workspace/code-generation/user-approval-system-747-756/social_media_backend/src/api/main.py", "pattern": "/^        password: Optional[str] = Field(None, description=\"Updated password\")$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "create_app.UserUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "password", "path": "/tmp/kavia/workspace/code-generation/user-approval-system-747-756/social_media_backend/src/api/main.py", "pattern": "/^        password: str = Field(..., description=\"Plain password to be hashed by backend\", min_len/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "create_app.UserCreate", "scopeKind": "class"}, {"_type": "tag", "name": "revoke_admin", "path": "/tmp/kavia/workspace/code-generation/user-approval-system-747-756/social_media_backend/src/api/main.py", "pattern": "/^    def revoke_admin(user_id: int = Path(...), session_id: Optional[str] = Cookie(default=None))/", "file": true, "language": "Python", "kind": "function", "signature": "(user_id: int = Path(...), session_id: Optional[str] = Cookie(default=None))", "scope": "create_app", "scopeKind": "function"}, {"_type": "tag", "name": "shares", "path": "/tmp/kavia/workspace/code-generation/user-approval-system-747-756/social_media_backend/src/api/main.py", "pattern": "/^        shares: int = 0$/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "create_app.PostOut", "scopeKind": "class"}, {"_type": "tag", "name": "total", "path": "/tmp/kavia/workspace/code-generation/user-approval-system-747-756/social_media_backend/src/api/main.py", "pattern": "/^        total: int = Field(..., description=\"Total number of records available\")$/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "create_app.PageMeta", "scopeKind": "class"}, {"_type": "tag", "name": "update_profile", "path": "/tmp/kavia/workspace/code-generation/user-approval-system-747-756/social_media_backend/src/api/main.py", "pattern": "/^    def update_profile(profile_id: int = Path(...), payload: ProfileUpdate = None, session_id: O/", "file": true, "language": "Python", "kind": "function", "signature": "(profile_id: int = Path(...), payload: ProfileUpdate = None, session_id: Optional[str] = Cookie(default=None))", "scope": "create_app", "scopeKind": "function"}, {"_type": "tag", "name": "update_user", "path": "/tmp/kavia/workspace/code-generation/user-approval-system-747-756/social_media_backend/src/api/main.py", "pattern": "/^    def update_user(user_id: int = Path(...), payload: UserUpdate = None, session_id: Optional[s/", "file": true, "language": "Python", "kind": "function", "signature": "(user_id: int = Path(...), payload: UserUpdate = None, session_id: Optional[str] = Cookie(default=None))", "scope": "create_app", "scopeKind": "function"}, {"_type": "tag", "name": "user_id", "path": "/tmp/kavia/workspace/code-generation/user-approval-system-747-756/social_media_backend/src/api/main.py", "pattern": "/^        user_id: int = Field(..., description=\"Associated user id\")$/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "create_app.ProfileCreate", "scopeKind": "class"}, {"_type": "tag", "name": "user_id", "path": "/tmp/kavia/workspace/code-generation/user-approval-system-747-756/social_media_backend/src/api/main.py", "pattern": "/^        user_id: int = Field(..., description=\"Author user id\")$/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "create_app.PostCreate", "scopeKind": "class"}, {"_type": "tag", "name": "website", "path": "/tmp/kavia/workspace/code-generation/user-approval-system-747-756/social_media_backend/src/api/main.py", "pattern": "/^        website: Optional[str] = Field(None, description=\"Website URL\", max_length=255)$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "create_app.ProfileCreate", "scopeKind": "class"}, {"_type": "tag", "name": "website", "path": "/tmp/kavia/workspace/code-generation/user-approval-system-747-756/social_media_backend/src/api/main.py", "pattern": "/^        website: Optional[str] = Field(None, description=\"Website URL\", max_length=255)$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "create_app.ProfileUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "website", "path": "/tmp/kavia/workspace/code-generation/user-approval-system-747-756/social_media_backend/src/api/main.py", "pattern": "/^        website: Optional[str] = None$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "create_app.ProfileOut", "scopeKind": "class"}, {"_type": "tag", "name": "websocket_usage_note", "path": "/tmp/kavia/workspace/code-generation/user-approval-system-747-756/social_media_backend/src/api/main.py", "pattern": "/^    def websocket_usage_note():$/", "file": true, "language": "Python", "kind": "function", "signature": "()", "scope": "create_app", "scopeKind": "function"}], "hash": "61538f3482614cf773dca04055c743e4", "format-version": 4, "code-base-name": "social_media_backend", "filename": "social_media_backend/src/api/main.py", "fields": [{"name": "CORS_ALLOW_ORIGINS = os.getenv(\"CORS_ALLOW_ORIGINS\", \"http:\\/\\/localhost:3000\")", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "SESSION_TTL_MINUTES = int(os.getenv(\"SESSION_TTL_MINUTES\", \"60\"))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "SQLITE_DB = os.getenv(\"SQLITE_DB\", os.path.join(os.path.dirname(__file__), \"..\", \"..\", \"social_m/", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "app = create_app()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Optional[str] avatar_url", "scope": "create_app.ProfileCreate", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] bio", "scope": "create_app.ProfileCreate", "scopeKind": "class", "description": "unavailable"}, {"name": "int comments", "scope": "create_app.PostOut", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] content", "scope": "create_app.PostUpdate", "scopeKind": "class", "description": "unavailable"}, {"name": "str content", "scope": "create_app.PostCreate", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] created_at", "scope": "create_app.PostOut", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] email", "scope": "create_app.UserUpdate", "scopeKind": "class", "description": "unavailable"}, {"name": "str email", "scope": "create_app.UserCreate", "scopeKind": "class", "description": "unavailable"}, {"name": "int likes", "scope": "create_app.PostOut", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] name", "scope": "create_app.UserUpdate", "scopeKind": "class", "description": "unavailable"}, {"name": "str name", "scope": "create_app.UserCreate", "scopeKind": "class", "description": "unavailable"}, {"name": "int page", "scope": "create_app.PageMeta", "scopeKind": "class", "description": "unavailable"}, {"name": "int page_size", "scope": "create_app.PageMeta", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] password", "scope": "create_app.UserUpdate", "scopeKind": "class", "description": "unavailable"}, {"name": "str password", "scope": "create_app.UserCreate", "scopeKind": "class", "description": "unavailable"}, {"name": "int shares", "scope": "create_app.PostOut", "scopeKind": "class", "description": "unavailable"}, {"name": "int total", "scope": "create_app.PageMeta", "scopeKind": "class", "description": "unavailable"}, {"name": "int user_id", "scope": "create_app.ProfileCreate", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] website", "scope": "create_app.ProfileCreate", "scopeKind": "class", "description": "unavailable"}]}